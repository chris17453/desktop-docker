From desktop-docker

ARG USER
ARG PASSWORD

# tagging
LABEL org.label-schema.schema-version="1.0" \
    org.label-schema.name="Docker Mate RDP Developer Base Image" \
    org.label-schema.vendor="None" \
    org.label-schema.author="Charles Watkins" \
    org.label-schema.license="GPLv2" \
    org.label-schema.build-date="20190905"

# target LOCAL user creaton
RUN useradd --create-home --shell /bin/bash --user-group --groups adm,wheel,root ${USER}
RUN echo "$USER:$PASSWORD" | chpasswd

# update the user 
RUN sed -i "s/USERNAME/$USER/g" /etc/supervisor/supervisord.conf

RUN yum -y groupinstall "Mate Desktop"

RUN yum install code -y
USER $USER
RUN code --install-extension ms-python.python
RUN code --install-extension softwaredotcom.swdc-vscode
RUN code --install-extension ms-vscode.cpptools
RUN code --install-extension gerane.theme-santojon-dark
RUN code --install-extension eamodio.gitlens


RUN echo "mate-session" > /home/$USER/.Xclients && \
  chmod a+x /home/$USER/.Xclients 

USER root


CMD ["/usr/bin/supervisord","-c","/etc/supervisor/supervisord.conf"]